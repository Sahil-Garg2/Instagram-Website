(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{23:function(e,t,a){e.exports=a(34)},28:function(e,t,a){},29:function(e,t,a){},34:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),o=a(21),s=a.n(o),i=(a(28),a(4)),r=a(5),c=a(1),u=a(7),h=a(6),m=(a(29),a(3)),d=a(2),p=a.n(d),g=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).state={search:"",user:[]},e.search=e.search.bind(Object(c.a)(e)),e}return Object(r.a)(a,[{key:"search",value:function(e){var t=this;this.setState({search:e.target.value});var a={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({query:e.target.value})};fetch("http://localhost:5000/search",a).then((function(e){return e.json()})).then((function(e){e.error||t.setState({user:e.user})})).catch((function(e){console.log(e)}))}},{key:"componentDidMount",value:function(){var e=document.querySelectorAll(".modal");p.a.Modal.init(e)}},{key:"render",value:function(){var e=this;return this.props.l?l.a.createElement("div",null,l.a.createElement("nav",null,l.a.createElement("div",{className:"nav-wrapper white"},l.a.createElement(m.b,{to:"/",className:"brand-logo left"},"Instagram"),l.a.createElement("ul",{id:"nav-mobile",className:"right hide-on-down"},l.a.createElement("li",null,l.a.createElement("i",{"data-target":"modal1",className:"large material-icons modal-trigger",style:{color:"black"}},"search")),l.a.createElement("li",null,l.a.createElement(m.b,{to:"/profile"},"Profile")),l.a.createElement("li",null,l.a.createElement(m.b,{to:"/create"},"Create Post")),l.a.createElement("li",null,l.a.createElement(m.b,{to:"mysubpost"},"My following ")),l.a.createElement("li",null," ",l.a.createElement("button",{className:"btn waves-effect waves-light #1e88e5 red darken-1 hide-on-down",type:"submit",name:"action",onClick:function(){localStorage.clear(),e.props.change1()}},"Logout")))),l.a.createElement("div",{id:"modal1",className:"modal",style:{color:"black"}},l.a.createElement("div",{className:"modal-content"},l.a.createElement("input",{type:"text",placeholder:"Search User",value:this.state.search,onChange:this.search}),l.a.createElement("ul",{className:"collection"},this.state.user.map((function(e,t){return l.a.createElement("div",{className:t},l.a.createElement(m.b,{to:"/profile/"+e._id},l.a.createElement("li",{className:"collection-item"},e.email)))})))),l.a.createElement("div",{className:"modal-footer"},l.a.createElement("button",{className:"modal-close waves-effect waves-green btn-flat"},"close"))))):l.a.createElement("div",null,l.a.createElement("nav",null,l.a.createElement("div",{className:"nav-wrapper white"},l.a.createElement(m.b,{to:"/signin",className:"brand-logo left"},"Instagram"),l.a.createElement("ul",{id:"nav-mobile",className:"right hide-on-down"},l.a.createElement("li",null,l.a.createElement(m.b,{to:"/signin"},"Login")),l.a.createElement("li",null,l.a.createElement(m.b,{to:"/Signup"},"Signup"))))))}}]),a}(n.Component),f=a(8),b=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={email:"",password:""},n.emailchange=n.emailchange.bind(Object(c.a)(n)),n.passwordchange=n.passwordchange.bind(Object(c.a)(n)),n.submit=n.submit.bind(Object(c.a)(n)),n}return Object(r.a)(a,[{key:"emailchange",value:function(e){this.setState({email:e.target.value})}},{key:"passwordchange",value:function(e){this.setState({password:e.target.value})}},{key:"submit",value:function(e){var t=this;if(e.preventDefault(),/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(this.state.email)){var a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:this.state.password,email:this.state.email})};fetch("http://localhost:5000/signin",a).then((function(e){return e.json()})).then((function(e){e.error?p.a.toast({html:e.error,classes:"#c62828 red darken-3"}):(p.a.toast({html:"Signin Successfully",classes:"#388e3c green darken-2"}),t.props.change(),localStorage.setItem("jwt",e.token),console.log(e.user),localStorage.setItem("user",JSON.stringify(e.user)),window.location="/")})).catch((function(e){console.log(e)}))}else p.a.toast({html:"Invalid email address",classes:"#c62828 red darken-3"})}},{key:"render",value:function(){return this.props.l?l.a.createElement(f.a,{to:"/"}):l.a.createElement("div",{class:"mycard"},l.a.createElement("div",{className:"card authcard input-field"},l.a.createElement("h2",null,"Instagram"),l.a.createElement("input",{type:"text",placeholder:"Email",value:this.state.email,onChange:this.emailchange}),l.a.createElement("input",{type:"text",placeholder:"Password",value:this.password,onChange:this.passwordchange}),l.a.createElement("button",{className:"btn waves-effect waves-light #1e88e5 blue darken-1",type:"submit",name:"action",onClick:this.submit},l.a.createElement("i",{className:" right #1e88e5 blue darken-1"},"Login")),l.a.createElement("h5",null,l.a.createElement(m.b,{to:"/signup"},"Don't have an account ?"))))}}]),a}(n.Component),v=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;Object(i.a)(this,a),n=t.call(this,e);var l=!0;return localStorage.getItem("jwt")||(l=!1),n.state={name:"",email:"",password:"",l:l,image:"",url:""},n.namechange=n.namechange.bind(Object(c.a)(n)),n.emailchange=n.emailchange.bind(Object(c.a)(n)),n.passwordchange=n.passwordchange.bind(Object(c.a)(n)),n.submit=n.submit.bind(Object(c.a)(n)),n.imagechange=n.imagechange.bind(Object(c.a)(n)),n}return Object(r.a)(a,[{key:"imagechange",value:function(e){this.setState({image:e.target.files[0]})}},{key:"namechange",value:function(e){this.setState({name:e.target.value})}},{key:"emailchange",value:function(e){this.setState({email:e.target.value})}},{key:"passwordchange",value:function(e){this.setState({password:e.target.value})}},{key:"submit",value:function(e){var t=this;if(e.preventDefault(),/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(this.state.email))if(this.state.image){var a=new FormData;a.append("file",this.state.image),a.append("upload_preset","InstramClone"),a.append("cloud_name","instagram-image"),fetch("https://api.cloudinary.com/v1_1/instagram-image/image/upload",{method:"POST",body:a}).then((function(e){return e.json()})).then((function(e){console.log(e.url),t.setState({url:e.url});var a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t.state.name,password:t.state.password,email:t.state.email,url:t.state.url})};fetch("http://localhost:5000/signup",a).then((function(e){return e.json()})).then((function(e){e.error?p.a.toast({html:e.error,classes:"#c62828 red darken-3"}):(p.a.toast({html:e.message,classes:"#388e3c green darken-2"}),window.location="/signin")})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))}else{var n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:this.state.name,password:this.state.password,email:this.state.email,url:this.state.url})};fetch("http://localhost:5000/signup",n).then((function(e){return e.json()})).then((function(e){e.error?p.a.toast({html:e.error,classes:"#c62828 red darken-3"}):(p.a.toast({html:e.message,classes:"#388e3c green darken-2"}),window.location="/signin")})).catch((function(e){console.log(e)}))}else p.a.toast({html:"Invalid email address",classes:"#c62828 red darken-3"})}},{key:"render",value:function(){return this.state.l?l.a.createElement(f.a,{to:"/"}):l.a.createElement("div",{class:"mycard"},l.a.createElement("div",{className:"card authcard input-field"},l.a.createElement("h2",null,"Instagram"),l.a.createElement("input",{type:"text",placeholder:"Name",value:this.state.name,onChange:this.namechange}),l.a.createElement("input",{type:"text",placeholder:"Email",value:this.state.email,onChange:this.emailchange}),l.a.createElement("input",{type:"text",placeholder:"Password",value:this.state.value,onChange:this.passwordchange}),l.a.createElement("div",{className:"file-field input-field"},l.a.createElement("div",{className:"btn #1e88e5 blue darken-1"},l.a.createElement("span",null,"Upload Image"),l.a.createElement("input",{type:"file",onChange:this.imagechange})),l.a.createElement("div",{className:"file-path-wrapper"},l.a.createElement("input",{className:"file-path validate",type:"text"}))),l.a.createElement("button",{className:"btn waves-effect waves-light #1e88e5 blue darken-1",type:"submit",name:"action",onClick:this.submit},l.a.createElement("i",{className:" right #1e88e5 blue darken-1"},"Signup")),l.a.createElement("h5",null,l.a.createElement(m.b,{to:"/signin"},"Already have an account ?"))))}}]),a}(n.Component),y=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={data:[],text:"",user:JSON.parse(localStorage.getItem("user"))},n.comment=n.comment.bind(Object(c.a)(n)),n.textChange=n.textChange.bind(Object(c.a)(n)),n.deletepost=n.deletepost.bind(Object(c.a)(n)),n}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this,t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")}};fetch("http://localhost:5000/allpost",t).then((function(e){return e.json()})).then((function(t){t.error||e.setState({data:t.posts})})).catch((function(e){console.log(e)}))}},{key:"textChange",value:function(e){this.setState({text:e.target.value})}},{key:"like",value:function(e){var t=this,a={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:e})};fetch("http://localhost:5000/like",a).then((function(e){return e.json()})).then((function(e){if(e.error);else{console.log(e.posts);var a=t.state.data.map((function(t){return t._id===e.posts._id?e.posts:t}));console.log(a),t.setState({data:a})}})).catch((function(e){console.log(e)}))}},{key:"unlike",value:function(e){var t=this,a={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:e})};fetch("http://localhost:5000/unlike",a).then((function(e){return e.json()})).then((function(e){if(e.error);else{var a=t.state.data.map((function(t){return t._id===e.posts._id?e.posts:t}));t.setState({data:a})}})).catch((function(e){console.log(e)}))}},{key:"comment",value:function(e){var t=this,a={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:e,text:this.state.text})};fetch("http://localhost:5000/comment",a).then((function(e){return e.json()})).then((function(e){if(e.error);else{var a=t.state.data.map((function(t){return t._id===e.posts._id?e.posts:t}));console.log(a),t.setState({data:a})}})).catch((function(e){console.log(e)}))}},{key:"deletepost",value:function(e){var t=this,a={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")}};fetch("http://localhost:5000/deletepost/".concat(e),a).then((function(e){return e.json()})).then((function(e){if(e.error);else{console.log(e);var a=t.state.data.filter((function(t){return t._id!==e.result._id}));t.setState({data:a})}})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this;return this.props.l?l.a.createElement("div",{className:"home"},this.state.data.map((function(t,a){return l.a.createElement("div",{className:"card home-card",key:a},l.a.createElement("h5",null,l.a.createElement(m.b,{to:t.postedBy._id==e.state.user._id?"/profile":"/profile/"+t.postedBy._id},t.postedBy.name),t.postedBy._id===e.state.user._id?l.a.createElement("i",{className:"material-icons",style:{float:"right"},onClick:function(){e.deletepost(t._id)}},"delete"):l.a.createElement("div",null)),l.a.createElement("div",{className:"card-image"},l.a.createElement("img",{src:t.photo,alt:""})),l.a.createElement("div",{className:"card-content"},l.a.createElement("i",{className:"material-icons",style:{color:"red"}},"favorite"),t.likes.includes(e.state.user._id)?l.a.createElement("i",{className:"material-icons",onClick:function(){e.unlike(t._id)}},"thumb_down"):l.a.createElement("i",{className:"material-icons",onClick:function(){e.like(t._id)}},"thumb_up"),l.a.createElement("h6",null,t.likes.length," likes"),l.a.createElement("h6",null,t.title),l.a.createElement("p",null,t.body),t.comments.map((function(e,t){return l.a.createElement("h6",{key:t},l.a.createElement("span",null,l.a.createElement("b",null,e.postedBy.name)," ",e.text))})),l.a.createElement("input",{type:"text",value:e.state.text,onChange:e.textChange,placeholder:"add a comment"}),l.a.createElement("button",{onClick:function(){e.comment(t._id)}},"Comment")))}))):l.a.createElement(f.a,{to:"/"})}}]),a}(n.Component),E=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={data:[],url:"",user:JSON.parse(localStorage.getItem("user"))},console.log(n.state.user),n.imagechange=n.imagechange.bind(Object(c.a)(n)),n}return Object(r.a)(a,[{key:"imagechange",value:function(e){var t=this,a=new FormData;a.append("file",e.target.files[0]),a.append("upload_preset","InstramClone"),a.append("cloud_name","instagram-image"),fetch("https://api.cloudinary.com/v1_1/instagram-image/image/upload",{method:"POST",body:a}).then((function(e){return e.json()})).then((function(e){console.log(e.url),t.setState({url:e.url});var a={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({url:t.state.url})};fetch("http://localhost:5000/uploadpic",a).then((function(e){return e.json()})).then((function(e){e.error?p.a.toast({html:"An error occured while uploading the pic",classes:"#c62828 red darken-3"}):(p.a.toast({html:"pic uploaded successfully",classes:"#388e3c green darken-2"}),console.log(e),localStorage.setItem("user",JSON.stringify({name:t.state.user.name,email:t.state.user.email,_id:t.state.user._id,followers:t.state.user.followers,following:t.state.user.following,url:e.url})),t.setState({url:e.url}))})).catch((function(e){console.log(e)}))})).catch((function(e){}))}},{key:"componentDidMount",value:function(){var e=this,t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")}};fetch("http://localhost:5000/mypost",t).then((function(e){return e.json()})).then((function(t){t.error||(console.log(t),e.setState({data:t.mypost}))})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return this.props.l?l.a.createElement("div",{style:{maxWidth:"1250px",margin:"0px auto"}},l.a.createElement("div",{style:{display:"flex",justifyContent:"space-around",margin:"18px 0px",borderBottom:"2px solid grey"}},l.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},l.a.createElement("img",{style:{width:"160px",height:"160px",borderRadius:"80px"},src:this.state.user.url,alt:""}),l.a.createElement("div",{className:"file-field input-field"},l.a.createElement("div",{className:"btn #1e88e5 blue darken-1"},l.a.createElement("span",null,"Upload Image"),l.a.createElement("input",{type:"file",onChange:this.imagechange})),l.a.createElement("div",{className:"file-path-wrapper"},l.a.createElement("input",{className:"file-path validate",type:"text"})))),l.a.createElement("div",null,l.a.createElement("h4",null,this.state.user.name),l.a.createElement("h4",null,this.state.user.email),l.a.createElement("div",{style:{display:"flex",justifyContent:"space-around",width:"108%"}},l.a.createElement("h6",null,this.state.data.length," posts"),console.log(this.state.user),l.a.createElement("h6",null,this.state.user.followers.length," followers"),l.a.createElement("h6",null,this.state.user.following.length," following ")))),l.a.createElement("div",{className:"galary"},this.state.data.map((function(e,t){return l.a.createElement("img",{key:t,className:"item",src:e.photo,alt:""})})))):l.a.createElement(f.a,{to:"/signin"})}}]),a}(n.Component),w=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={title:"",body:"",image:"",url:""},n.titlechange=n.titlechange.bind(Object(c.a)(n)),n.bodychange=n.bodychange.bind(Object(c.a)(n)),n.imagechange=n.imagechange.bind(Object(c.a)(n)),n.submit=n.submit.bind(Object(c.a)(n)),n.upload=n.upload.bind(Object(c.a)(n)),n}return Object(r.a)(a,[{key:"upload",value:function(e){var t=this,a=new FormData;a.append("file",this.state.image),a.append("upload_preset","InstramClone"),a.append("cloud_name","instagram-image"),fetch("https://api.cloudinary.com/v1_1/instagram-image/image/upload",{method:"POST",body:a}).then((function(e){return e.json()})).then((function(e){console.log(e.url),t.setState({url:e.url});var a={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({url:t.state.url,title:t.state.title,body:t.state.body})};fetch("http://localhost:5000/createpost",a).then((function(e){return e.json()})).then((function(e){e.error?p.a.toast({html:e.error,classes:"#c62828 red darken-3"}):(p.a.toast({html:"Successfully created",classes:"#388e3c green darken-2"}),window.location="/signin")})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))}},{key:"titlechange",value:function(e){this.setState({title:e.target.value})}},{key:"bodychange",value:function(e){this.setState({body:e.target.value})}},{key:"imagechange",value:function(e){console.log(e.target.files[0]),this.setState({image:e.target.files[0]})}},{key:"submit",value:function(e){e.preventDefault()}},{key:"render",value:function(){return this.props.l?l.a.createElement("div",{className:"card input-field",style:{margin:"30px auto",maxWidth:"500px",padding:"20px",textAlign:"center"}},l.a.createElement("input",{type:"text",placeholder:"title",value:this.state.title,onChange:this.titlechange}),l.a.createElement("input",{type:"text",placeholder:"body",value:this.state.body,onChange:this.bodychange}),l.a.createElement("div",{className:"file-field input-field"},l.a.createElement("div",{className:"btn #1e88e5 blue darken-1"},l.a.createElement("span",null,"Upload Image"),l.a.createElement("input",{type:"file",onChange:this.imagechange})),l.a.createElement("div",{className:"file-path-wrapper"},l.a.createElement("input",{className:"file-path validate",type:"text"}))),l.a.createElement("button",{className:"btn waves-effect waves-light #1e88e5 blue darken-1",type:"submit",name:"action"},l.a.createElement("i",{className:" right #1e88e5 blue darken-1",onClick:this.upload},"Submit Post"))):l.a.createElement(f.a,{to:"/signin"})}}]),a}(n.Component);Array.prototype.remove=function(e){for(var t=this.length;t--;)this[t]===e&&this.splice(t,1)};var j=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={data:{user:{email:"",name:"",url:"",followers:[],following:[]},post:[]},user:JSON.parse(localStorage.getItem("user")),id:window.location.pathname.split("/")[2],f:!0},n.follow=n.follow.bind(Object(c.a)(n)),n.unfollow=n.unfollow.bind(Object(c.a)(n)),n}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this,t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")}};fetch("http://localhost:5000/user/".concat(this.state.id),t).then((function(e){return e.json()})).then((function(t){t.error||(console.log(t),t.user.followers.includes(e.state.id)&&(e.state.f=!1),e.setState({data:t}))})).catch((function(e){console.log(e)}))}},{key:"follow",value:function(){var e=this,t={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({followId:this.state.id})};fetch("http://localhost:5000/follow",t).then((function(e){return e.json()})).then((function(t){if(t.error);else{console.log(t);var a=e.state.data;a.user=t,e.setState({data:a});var n=e.state.user;n.following.push(e.state.id),localStorage.setItem("user",JSON.stringify({name:n.name,email:n.email,_id:n._id,followers:n.followers,following:n.following,url:n.url})),e.setState({f:!0})}})).catch((function(e){console.log(e)}))}},{key:"unfollow",value:function(){var e=this,t={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({unfollowId:this.state.id})};fetch("http://localhost:5000/unfollow",t).then((function(e){return e.json()})).then((function(t){if(t.error);else{console.log(t);var a=e.state.data;a.user=t,e.setState({data:a});var n=e.state.user;n.following.remove(e.state.id),console.log("user"+n),localStorage.setItem("user",JSON.stringify({name:n.name,email:n.email,_id:n._id,followers:n.followers,following:n.following,url:n.url})),e.setState({f:!1})}})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return this.props.l?l.a.createElement("div",{style:{maxWidth:"1250px",margin:"0px auto"}},l.a.createElement("div",{style:{display:"flex",justifyContent:"space-around",margin:"18px 0px",borderBottom:"2px solid grey"}},l.a.createElement("div",null,l.a.createElement("img",{style:{width:"160px",height:"160px",borderRadius:"80px"},src:this.state.data.user.url,alt:""})),l.a.createElement("div",null,l.a.createElement("h4",null,this.state.data.user.name),l.a.createElement("h4",null,this.state.data.user.email),l.a.createElement("div",{style:{display:"flex",justifyContent:"space-around",width:"108%"}},l.a.createElement("h6",null,this.state.data.post.length," posts"),l.a.createElement("h6",null,this.state.data.user.followers.length," followers"),l.a.createElement("h6",null,this.state.data.user.following.length," following "),!1===this.state.f?l.a.createElement("button",{className:"btn waves-effect waves-light #1e88e5 blue darken-1",type:"submit",name:"action",onClick:this.follow},l.a.createElement("i",{className:" right #1e88e5 blue darken-1"},"Follow")):l.a.createElement("button",{className:"btn waves-effect waves-light #1e88e5 blue darken-1",type:"submit",name:"action",onClick:this.unfollow},l.a.createElement("i",{className:" right #1e88e5 blue darken-1"},"Unfollow"))))),l.a.createElement("div",{className:"galary"},this.state.data.post.map((function(e,t){return l.a.createElement("img",{key:t,className:"item",src:e.photo,alt:""})})))):l.a.createElement(f.a,{to:"/signin"})}}]),a}(n.Component),k=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={email:""},n.emailchange=n.emailchange.bind(Object(c.a)(n)),n.submit=n.submit.bind(Object(c.a)(n)),n}return Object(r.a)(a,[{key:"emailchange",value:function(e){this.setState({email:e.target.value})}},{key:"submit",value:function(e){if(e.preventDefault(),/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(this.state.email)){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:this.state.email})};fetch("http://localhost:5000/resetpassword",t).then((function(e){return e.json()})).then((function(e){e.error?p.a.toast({html:e.error,classes:"#c62828 red darken-3"}):(p.a.toast({html:"Check  your email",classes:"#388e3c green darken-2"}),window.location="/signin")})).catch((function(e){console.log(e)}))}else p.a.toast({html:"Invalid email address",classes:"#c62828 red darken-3"})}},{key:"render",value:function(){return l.a.createElement("div",{class:"mycard"},l.a.createElement("div",{className:"card authcard input-field"},l.a.createElement("h2",null,"Instagram"),l.a.createElement("input",{type:"text",placeholder:"email",value:this.email,onChange:this.emailchange}),l.a.createElement("button",{className:"btn waves-effect waves-light #1e88e5 blue darken-1",type:"submit",name:"action",onClick:this.submit},l.a.createElement("i",{className:" right #1e88e5 blue darken-1"},"Send Email"))))}}]),a}(n.Component),S=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={password:""},n.passwordchange=n.passwordchange.bind(Object(c.a)(n)),n.submit=n.submit.bind(Object(c.a)(n)),n}return Object(r.a)(a,[{key:"passwordchange",value:function(e){this.setState({password:e.target.value})}},{key:"submit",value:function(e){e.preventDefault();var t={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:window.location.pathname.split("/")[2],password:this.state.password})};fetch("http://localhost:5000/changepassword",t).then((function(e){return e.json()})).then((function(e){e.error?p.a.toast({html:"An error occured, please retry after sometime",classes:"#c62828 red darken-3"}):(p.a.toast({html:"password successfully updated",classes:"#388e3c green darken-2"}),window.location="/signin")})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return l.a.createElement("div",{class:"mycard"},l.a.createElement("div",{className:"card authcard input-field"},l.a.createElement("h2",null,"Instagram"),l.a.createElement("input",{type:"text",placeholder:"Password",value:this.state.value,onChange:this.passwordchange}),l.a.createElement("button",{className:"btn waves-effect waves-light #1e88e5 blue darken-1",type:"submit",name:"action",onClick:this.submit},l.a.createElement("i",{className:" right #1e88e5 blue darken-1"},"Reset Password"))))}}]),a}(n.Component),O=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={data:[],text:"",user:JSON.parse(localStorage.getItem("user"))},n.comment=n.comment.bind(Object(c.a)(n)),n.textChange=n.textChange.bind(Object(c.a)(n)),n.deletepost=n.deletepost.bind(Object(c.a)(n)),n}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this,t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")}};fetch("http://localhost:5000/getsubpost",t).then((function(e){return e.json()})).then((function(t){t.error||e.setState({data:t.posts})})).catch((function(e){console.log(e)}))}},{key:"textChange",value:function(e){this.setState({text:e.target.value})}},{key:"like",value:function(e){var t=this,a={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:e})};fetch("http://localhost:5000/like",a).then((function(e){return e.json()})).then((function(e){if(e.error);else{console.log(e.posts);var a=t.state.data.map((function(t){return t._id===e.posts._id?e.posts:t}));console.log(a),t.setState({data:a})}})).catch((function(e){console.log(e)}))}},{key:"unlike",value:function(e){var t=this,a={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:e})};fetch("http://localhost:5000/unlike",a).then((function(e){return e.json()})).then((function(e){if(e.error);else{var a=t.state.data.map((function(t){return t._id===e.posts._id?e.posts:t}));t.setState({data:a})}})).catch((function(e){console.log(e)}))}},{key:"comment",value:function(e){var t=this,a={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:e,text:this.state.text})};fetch("http://localhost:5000/comment",a).then((function(e){return e.json()})).then((function(e){if(e.error);else{var a=t.state.data.map((function(t){return t._id===e.posts._id?e.posts:t}));console.log(a),t.setState({data:a})}})).catch((function(e){console.log(e)}))}},{key:"deletepost",value:function(e){var t=this,a={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")}};fetch("http://localhost:5000/deletepost/".concat(e),a).then((function(e){return e.json()})).then((function(e){if(e.error);else{console.log(e);var a=t.state.data.filter((function(t){return t._id!==e.result._id}));t.setState({data:a})}})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this;return this.props.l?l.a.createElement("div",{className:"home"},this.state.data.map((function(t,a){return l.a.createElement("div",{className:"card home-card",key:a},l.a.createElement("h5",null,l.a.createElement(m.b,{to:t.postedBy._id==e.state.user._id?"/profile":"/profile/"+t.postedBy._id},t.postedBy.name),t.postedBy._id===e.state.user._id?l.a.createElement("i",{className:"material-icons",style:{float:"right"},onClick:function(){e.deletepost(t._id)}},"delete"):l.a.createElement("div",null)),l.a.createElement("div",{className:"card-image"},l.a.createElement("img",{src:t.photo,alt:""})),l.a.createElement("div",{className:"card-content"},l.a.createElement("i",{className:"material-icons",style:{color:"red"}},"favorite"),t.likes.includes(e.state.user._id)?l.a.createElement("i",{className:"material-icons",onClick:function(){e.unlike(t._id)}},"thumb_down"):l.a.createElement("i",{className:"material-icons",onClick:function(){e.like(t._id)}},"thumb_up"),l.a.createElement("h6",null,t.likes.length," likes"),l.a.createElement("h6",null,t.title),l.a.createElement("p",null,t.body),t.comments.map((function(e,t){return l.a.createElement("h6",{key:t},l.a.createElement("span",null,l.a.createElement("b",null,e.postedBy.name)," ",e.text))})),l.a.createElement("input",{type:"text",value:e.state.text,onChange:e.textChange,placeholder:"add a comment"}),l.a.createElement("button",{onClick:function(){e.comment(t._id)}},"Comment")))}))):l.a.createElement(f.a,{to:"/"})}}]),a}(n.Component),N=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={l:!!localStorage.getItem("jwt")},n.change=n.change.bind(Object(c.a)(n)),n.change1=n.change1.bind(Object(c.a)(n)),n}return Object(r.a)(a,[{key:"change",value:function(){this.setState({l:!0})}},{key:"change1",value:function(){this.setState({l:!1})}},{key:"render",value:function(){return l.a.createElement("div",{className:"App"},l.a.createElement(m.a,null,l.a.createElement(g,{l:this.state.l,change:this.change,change1:this.change1}),l.a.createElement(f.b,{exact:!0,path:"/"},l.a.createElement(y,{l:this.state.l,change:this.change,change1:this.change1})," "),l.a.createElement(f.b,{exact:!0,path:"/signin"},l.a.createElement(b,{l:this.state.l,change:this.change,change1:this.change1})),l.a.createElement(f.b,{exact:!0,path:"/signup"},l.a.createElement(v,{l:this.state.l,change:this.change,change1:this.change1})),l.a.createElement(f.b,{exact:!0,path:"/profile"},l.a.createElement(E,{l:this.state.l,change:this.change,change1:this.change1})),l.a.createElement(f.b,{exact:!0,path:"/profile/:userid"},l.a.createElement(j,{l:this.state.l,change:this.change,change1:this.change1})),l.a.createElement(f.b,{exact:!0,path:"/create"},l.a.createElement(w,{l:this.state.l,change:this.change,change1:this.change1})),l.a.createElement(f.b,{exact:!0,path:"/mysubpost"},l.a.createElement(O,{l:this.state.l,change:this.change,change1:this.change1})),l.a.createElement(f.b,{exact:!0,path:"/reset"},l.a.createElement(k,null)),l.a.createElement(f.b,{exact:!0,path:"/reset/:token"},l.a.createElement(S,null))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(N,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[23,1,2]]]);
//# sourceMappingURL=main.dbda99d4.chunk.js.map